{% extends 'base.html.twig' %}

{% block title %}Reservation consult{% endblock %}

{% block body %}
    <div>

{#        {{ |date("m/d/Y h:i:s") }}#}
        <table class="table table-striped table-dark" style="text-align: center">
        <thead>
        <tr>
            <th colspan="9" style="text-align: center">
                <h1>Mes reservations</h1>
            </th>
        </tr>
            <tr>
                <th>Nom</th>
                <th>Nombres de places réservés</th>
                <th>Numero salle</th>
                <th>Date de la séance</th>
                <th>Email</th>
                <th>Nom</th>
                <th>Prenom</th>
                <th>Actions sur la reservation</th>
                <th>Status de la reservation</th>
            </tr>
        </thead>
        <tbody>
        {% for reservation in reservations %}
            {% if "now"|date('U') <= reservation.idFilm.heure|date('U')  %}
                <tr>
                    <td>{{ reservation.idFilm.idFilm.Nom }}</td>
                    <td>{{ reservation.NbrPlaces }}</td>
                    <td> {{ reservation.idFilm.idSalle.Numero }}</td>
                    <td> {{ reservation.idFilm.heure|date('Y-m-d h:i:s') }}</td>
                    <td>{{ reservation.idUser.email }}</td>
                    <td>{{ reservation.idUser.nom }}</td>
                    <td>{{ reservation.idUser.prenom }}</td>
                    <td>
                        <button class="btn btn-danger">Annuler</button>
                    </td>
                    <td>
                        {% if reservation.Etat == 0 %}
                            <span class="badge badge-pill badge-success">Reservé</span>
                        {% elseif reservation.Etat == 1 %}
                            <span class="badge badge-pill badge-warning">En cours de validation</span>
                        {% else %}
                            <span class="badge badge-pill badge-danger">Annulé</span>
                        {% endif %}
                    </td>
                </tr>
            {% else %}
                <td colspan="9">Pas de réservations active</td>
            {% endif %}
        {% endfor %}
        </tbody>
        </table>
    </div>
{% endblock %}
